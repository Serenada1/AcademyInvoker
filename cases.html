<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сундуки - Academy Invoker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="flex justify-between items-center mb-8">
            <button onclick="window.location.href='index.html'" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>Назад
            </button>
            <h1 class="text-3xl font-bold text-center">Сундуки</h1>
            <div class="w-20"></div>
        </div>

        <!-- Cases Section -->
        <div class="pb-20">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Immortal Treasure -->
                <div class="relative rounded-xl border-2 border-yellow-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-48" onclick="openCase('immortal')">
                    <img src="./images/ImmortalCase.png" alt="Immortal Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-4 text-center h-full flex flex-col justify-end">
                        <h3 class="text-lg font-bold mb-1 text-white">Immortal</h3>

                        <div class="text-xl font-bold text-yellow-200 mb-2">Бесплатно</div>
                        <button class="bg-yellow-500 hover:bg-yellow-400 px-4 py-2 rounded-lg transition-colors w-full font-bold text-sm">
                            Открыть
                        </button>
                    </div>
                </div>

                <!-- Mythical Treasure -->
                <div class="relative rounded-xl border-2 border-purple-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-48" onclick="openCase('mythical')">
                    <img src="./images/MysteryCase.png" alt="Mythical Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-4 text-center h-full flex flex-col justify-end">
                        <h3 class="text-lg font-bold mb-1 text-white">Mythical</h3>
                        <div class="text-xl font-bold text-purple-200 mb-2">Бесплатно</div>
                        <button class="bg-purple-500 hover:bg-purple-400 px-4 py-2 rounded-lg transition-colors w-full font-bold text-sm">
                            Открыть
                        </button>
                    </div>
                </div>

                <!-- Rare Treasure -->
                <div class="relative rounded-xl border-2 border-blue-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-48" onclick="openCase('rare')">
                    <img src="./images/RareCase.png" alt="Rare Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-4 text-center h-full flex flex-col justify-end">
                        <h3 class="text-lg font-bold mb-1 text-white">Rare</h3>
                        <div class="text-xl font-bold text-blue-200 mb-2">Бесплатно</div>
                        <button class="bg-blue-500 hover:bg-blue-400 px-4 py-2 rounded-lg transition-colors w-full font-bold text-sm">
                            Открыть
                        </button>
                    </div>
                </div>

                <!-- Common Treasure -->
                <div class="relative rounded-xl border-2 border-gray-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-48" onclick="openCase('common')">
                    <img src="./images/CommonCase.png" alt="Common Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-4 text-center h-full flex flex-col justify-end">
                        <h3 class="text-lg font-bold mb-1 text-white">Common</h3>
                        <div class="text-xl font-bold text-gray-200 mb-2">Бесплатно</div>
                        <button class="bg-gray-500 hover:bg-gray-400 px-4 py-2 rounded-lg transition-colors w-full font-bold text-sm">
                            Открыть
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Additional Cases Section -->
            <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-8">
                <!-- 1Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('1case')">
                    <img src="./images/1Case.png" alt="1Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">1Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 2Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('2case')">
                    <img src="./images/2Case.png" alt="2Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">2Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 3Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('3case')">
                    <img src="./images/3Case.png" alt="3Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">3Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 4Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('4case')">
                    <img src="./images/4Case.png" alt="4Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">4Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 5Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('5case')">
                    <img src="./images/5Case.png" alt="5Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">5Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 6Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('6case')">
                    <img src="./images/6Case.png" alt="6Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">6Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 7Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('7case')">
                    <img src="./images/7Case.png" alt="7Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">7Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 8Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('8case')">
                    <img src="./images/8Case.png" alt="8Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">8Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 9Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('9case')">
                    <img src="./images/9Case.png" alt="9Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">9Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
                
                <!-- 10Case -->
                <div class="relative rounded-xl border-2 border-green-400 hover:scale-105 transition-transform cursor-pointer overflow-hidden min-h-32" onclick="openCase('10case')">
                    <img src="./images/10Case.png" alt="10Case" class="w-full h-full object-cover absolute inset-0">
                    <div class="relative bg-black bg-opacity-50 p-2 text-center h-full flex flex-col justify-end">
                        <h3 class="text-sm font-bold mb-1 text-white">10Case</h3>
                        <button class="bg-green-500 hover:bg-green-400 px-2 py-1 rounded text-xs font-bold">
                            Открыть
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Opening Modal -->
        <div id="openingModal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center hidden z-50">
            <div class="bg-gray-800 rounded-xl p-8 text-center max-w-md mx-4 border border-gray-600">
                <div id="caseIcon" class="text-8xl mb-4 animate-bounce">💎</div>
                <h3 class="text-2xl font-bold mb-4">Открываем сундук...</h3>
                <div class="w-full bg-gray-700 rounded-full h-3 mb-4">
                    <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-100" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Roulette Modal -->
        <div id="rouletteModal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center hidden z-50">
            <div class="bg-gray-800 rounded-xl p-6 max-w-4xl mx-4 border border-gray-600">
                <h3 class="text-2xl font-bold mb-6 text-center">Выпал предмет!</h3>
                <div class="relative overflow-hidden bg-gray-700 rounded-lg mb-6" style="height: 120px;">
                    <div id="rouletteStrip" class="flex absolute top-0" style="height: 120px;">
                        <!-- Items will be generated here -->
                    </div>
                    <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-full bg-red-500 z-10"></div>
                </div>
                <div class="text-center">
                    <button id="claimBtn" class="bg-green-600 hover:bg-green-700 px-8 py-3 rounded-lg transition-colors font-bold" onclick="claimReward()" style="display: none;">
                        Забрать награду
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bottom Navigation Bar -->
    <nav class="fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-700 z-50">
        <div class="flex justify-around items-center py-3">
            <button class="nav-btn flex flex-col items-center p-2 text-gray-400 hover:text-yellow-400 transition-colors" onclick="navigateTo('pvp')">
                <i class="fas fa-sword text-xl mb-1"></i>
                <span class="text-xs">PvP</span>
            </button>
            <button class="nav-btn flex flex-col items-center p-2 text-yellow-400 transition-colors">
                <i class="fas fa-treasure-chest text-xl mb-1"></i>
                <span class="text-xs">Сундук</span>
            </button>
            <button class="nav-btn flex flex-col items-center p-2 text-gray-400 hover:text-yellow-400 transition-colors" onclick="navigateTo('leaderboard')">
                <i class="fas fa-trophy text-xl mb-1"></i>
                <span class="text-xs">Рейтинг</span>
            </button>
        </div>
    </nav>
    
    <script>
        const dotaItems = {
            immortal: [
                { name: 'Pudge Hook', rarity: 'Immortal', price: 400 },
                { name: 'Invoker Cape', rarity: 'Immortal', price: 150 },
                { name: 'Axe Weapon', rarity: 'Immortal', price: 80 }
            ],
            rare: [
                { name: 'CM Arcana', rarity: 'Rare', price: 35 },
                { name: 'Drow Bow', rarity: 'Rare', price: 25 }
            ],
            common: [
                { name: 'Pudge Hat', rarity: 'Common', price: 8 },
                { name: 'Sven Sword', rarity: 'Common', price: 12 }
            ],
            mythical: [
                { name: 'Mystery Item', rarity: 'Mythical', price: 100 },
                { name: 'Ancient Relic', rarity: 'Mythical', price: 200 },
                { name: 'Mystic Orb', rarity: 'Mythical', price: 150 }
            ]
        };

        let currentCaseType = null;
        let wonItem = null;

        function openCase(caseType) {
            currentCaseType = caseType;
            const icons = { immortal: '💎', rare: '🎁', common: '📦', mythical: '🔮' };
            document.getElementById('caseIcon').textContent = icons[caseType];
            document.getElementById('openingModal').classList.remove('hidden');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                document.getElementById('progressBar').style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('openingModal').classList.add('hidden');
                        showRoulette();
                    }, 500);
                }
            }, 50);
        }

        function showRoulette() {
            const items = dotaItems[currentCaseType];
            const rouletteStrip = document.getElementById('rouletteStrip');
            
            let stripHTML = '';
            for (let i = 0; i < 30; i++) {
                const item = items[Math.floor(Math.random() * items.length)];
                const rarityColors = {
                    'Immortal': 'border-yellow-400 bg-yellow-900',
                    'Rare': 'border-purple-400 bg-purple-900',
                    'Common': 'border-blue-400 bg-blue-900',
                    'Mythical': 'border-purple-500 bg-purple-800'
                };
                stripHTML += `
                    <div class="flex-shrink-0 w-24 h-24 m-1 ${rarityColors[item.rarity]} border-2 rounded-lg flex items-center justify-center">
                        <div class="text-white text-xs text-center">${item.name}</div>
                    </div>
                `;
            }
            rouletteStrip.innerHTML = stripHTML;
            
            wonItem = items[Math.floor(Math.random() * items.length)];
            
            document.getElementById('rouletteModal').classList.remove('hidden');
            
            // Анимация с замедлением
            let position = 0;
            let speed = 50;
            const targetPosition = -(15 * 100 - 200);
            
            function animateRoulette() {
                position -= speed;
                rouletteStrip.style.transform = `translateX(${position}px)`;
                
                // Замедляем скорость
                speed *= 0.98;
                
                // Останавливаем когда достигли цели и скорость мала
                if (position <= targetPosition && speed < 1) {
                    rouletteStrip.style.transform = `translateX(${targetPosition}px)`;
                    setTimeout(() => {
                        document.getElementById('claimBtn').style.display = 'block';
                    }, 500);
                    return;
                }
                
                requestAnimationFrame(animateRoulette);
            }
            
            setTimeout(() => {
                animateRoulette();
            }, 100);       
        }
        

        function claimReward() {
            if (wonItem) {
                alert(`Поздравляем! Вы получили: ${wonItem.name} (${wonItem.rarity})`);
            }
            
            document.getElementById('rouletteModal').classList.add('hidden');
            document.getElementById('claimBtn').style.display = 'none';
            wonItem = null;
            currentCaseType = null;
        }

        function navigateTo(page) {
            if (page === 'pvp') {
                window.location.href = 'pvp.html';
            } else if (page === 'leaderboard') {
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>